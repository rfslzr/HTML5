<!doctype html>
<html lang="en">
	<head>
		<title>Dynamic PNG shadow position &amp; opacity with jQuery - by Daniel Kurdoghlian | PushingPixels.at</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="title" content="Dynamic PNG shadow position & opacity with jQuery - by Daniel Kurdoghlian | PushingPixels.at" />
		<meta name="keywords" content="webdesign, webdevelopment, webdev, programming, coding, web-dev, daniel, kurdoghlian, dynamic, shadow, position, opacity, png, jquery, css3, html5, javascript, effect, effects, fx" />
		<meta name="description" content="Interactive, dynamic PNG shadow opacity and position, depending on the position and distance of the light-source - Build with jQuery by Daniel Kurdoghlian | PushingPixels.at" />
		<link rel="image_src" href="screenshot.jpg" />
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
		<link rel="stylesheet" href="style.css" type="text/css" media="all" />
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<script type="text/javascript" src="script.js"></script>
		<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
	</head>
	<body>
		<h1>Dynamic PNG shadow position &amp; opacity  with jQuery<br/> <small>by Daniel Kurdoghlian</small></h1>



		<div id="tabs">
			<ul>
				<li><a href="index.html#tab-1">Demo</a></li>
                <li><a href="index.html#tab-2">Code</a></li>
                <li><a href="index.html#tab-3">Info</a></li>
			</ul>
			<div id="tab-1" class="tab">
		        <div id="switch"></div>
		        <div id="light-bulb" class="off"><div id="light-bulb2"></div></div>
		        <div id="logo"></div>
		        <div id="logosh"></div>
		        <div id="infobox">
		            <h2 id="statustext">Please activate JavaScript!</h2>
		            <a id="home" href="../../index.html" title="visit PushingPixels.at" target="_blank">proudly presented by PushingPixels.at</a>
		            <a id="tutorial" href="http://j.mp/9Rbq5T" title="visit the 1stWebDesigner" target="_blank">Tutorial available on 1stWebDesigner</a>
		        </div>
			</div>
            <div id="tab-2" class="texttab ui-tabs-hide">
                <h2>The Source Code</h2>
				<p>Below you can see the <strike>magic</strike> interesting part of my script:</p>
				<p>
				    <pre class="sh">
<span class="odd"><span class="function">function</span> moveShadow<span class="green">(){</span></span>
<span class="evn">    lightX          <span class="green">=</span> parseInt<span class="green">(</span>lightbulb<span class="green">.</span>offset<span class="green">().</span>left<span class="green">) +</span> lightCenterX<span class="green">;</span></span>
<span class="odd">    lightY          <span class="green">=</span> parseInt<span class="green">(</span>lightbulb<span class="green">.</span>offset<span class="green">().</span>top<span class="green">) +</span> lightCenterY<span class="green">;</span></span>
<span class="evn">    logoX           <span class="green">=</span> parseInt<span class="green">(</span>logo<span class="green">.</span>offset<span class="green">().</span>left<span class="green">) +</span> logoCenterX<span class="green">;</span></span>
<span class="odd">    logoY           <span class="green">=</span> parseInt<span class="green">(</span>logo<span class="green">.</span>offset<span class="green">().</span>top<span class="green">) +</span> logoCenterY<span class="green">;</span></span>
<span class="evn">    distanceX       <span class="green">=</span> logoX <span class="green">-</span> lightX<span class="green">;</span></span>
<span class="odd">    distanceY       <span class="green">=</span> logoY <span class="green">-</span> lightY<span class="green">;</span></span>
<span class="evn">    distance        <span class="green">=</span> Math.sqrt<span class="green">(</span>Math<span class="green">.</span>pow<span class="green">(</span>distanceX<span class="green">,</span> <span class="pink">2</span><span class="green">) +</span> Math<span class="green">.</span>pow<span class="green">(</span>distanceY<span class="green">,</span> <span class="pink">2</span><span class="green">));</span></span>
<span class="odd">    shadowDistance  <span class="green">=</span> distance <span class="green">*</span> shadowOffset<span class="green">;</span></span>
<span class="evn">    shadowPosLeft   <span class="green">=</span> <span class="green">(</span>distanceX <span class="green">/</span> distance <span class="green">*</span> shadowDistance <span class="green">+</span> lightX <span class="green">-</span> logoShdwCenterX<span class="green">) +</span> <span class="orange">"px"</span><span class="green">;</span></span>
<span class="odd">    shadowPosTop    <span class="green">=</span> <span class="green">(</span>distanceY <span class="green">/</span> distance <span class="green">*</span> shadowDistance <span class="green">+</span> lightY <span class="green">-</span> logoShdwCenterY<span class="green">) +</span> <span class="orange">"px"</span><span class="green">;</span></span>
<span class="evn">    logoshadow.css<span class="green">({</span> <span class="orange">"left"</span><span class="green">:</span> shadowPosLeft<span class="green">,</span> <span class="orange">"top"</span><span class="green">:</span> shadowPosTop<span class="green">,</span> <span class="orange">"opacity"</span><span class="green">:</span> setOpacity<span class="green">(</span>shadowDistance<span class="green">) });</span></span>
<span class="odd"><span class="green">}</span></span></pre>
				</p>
				<p>This is, what makes the correct positioning of the shadow &lt;div&gt;. Just assign this function to a dragging event (+ window-resize &amp; load) and you have your dynamic positioning.</p>
				<p>Just look at the <a href="javascript:location.href = 'view-source:' + location.href;">source code</a> of this page</a>, the <a href="javascript:location.href = 'view-source:http://pushingpixels.at/experiments/dynamic_shadow/script.js';">JavaScript</a> and the <a href="javascript:location.href = 'view-source:http://pushingpixels.at/experiments/dynamic_shadow/style.css';">CSS</a>, to see it in more detail.</p>
                <div id="ga3">
                    <script type="text/javascript"><!--
                    google_ad_client = "ca-pub-2552502674694369";
                    /* pp-exp-text */
                    google_ad_slot = "6850282984";
                    google_ad_width = 468;
                    google_ad_height = 60;
                    //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>
                </div>
            </div>
            <div id="tab-3" class="texttab ui-tabs-hide">
                <h2>Some Explenation</h2>
                <p>..will be added soon!</p>
                <div id="ga4">
					<script type="text/javascript"><!--
					google_ad_client = "ca-pub-2552502674694369";
					/* pp-exp-text2 */
					google_ad_slot = "6225205566";
					google_ad_width = 468;
					google_ad_height = 60;
					//-->
					</script>
					<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
					</script>
                </div>
            </div>
		</div>




		<!-- nothing important below this line - only twitter & bananas -->

		<ul id="sharebar">
			<li class="fb"><div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=210174542356710&xfbml=1"></script><fb:like href="http://pushingpixels.at/experiments/dynamic_shadow/" send="true" layout="box_count" width="70" show_faces="true" font="verdana"></fb:like></li>
            <li><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://pushingpixels.at/experiments/dynamic_shadow/" data-text="Dynamic PNG shadow position & opacity with jQuery" data-count="vertical" data-via="derblub">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li>
			<li><a title="Post to Google Buzz" class="google-buzz-button" href="http://www.google.com/buzz/post" data-button-style="normal-count" data-url="http://pushingpixels.at/experiments/dynamic_shadow/" data-imageurl="screenshot.jpg"></a><script type="text/javascript" src="http://www.google.com/buzz/api/button.js"></script></li>
            <li><g:plusone size="tall"></g:plusone></li>
            <li><a class="DiggThisButton DiggMedium" href="http://digg.com/submit?url=http://pushingpixels.at/experiments/dynamic_shadow/&title=Dynamic%20PNG%20shadow%20position%20&%20opacity%20with%20jQuery%20-%20by%20@derblub&related=no"></a></li>
			<li><script src="http://www.stumbleupon.com/hostedbadge.php?s=5&r=http://pushingpixels.at/experiments/dynamic_shadow/"></script></li>
		</ul>

		<div id="bananasbubble" class="bubble">Please consider donating me <span class="bananas">bananas</span> if you liked this, so I can spend more time with experiments like this!</div>
		<a id="bananas" href="http://j.mp/dole_out_bananas" target="_blank"><img src="bananas.png" width="60" height="50" /></a>
		<div id="followmebubble" class="bubble">Follow me on <span class="twitter">twitter</span>!</div>
		<a id="followme" href="http://twitter.com/derblub" target="_blank"><img src="followme.png" width="50" height="50" /></a>
		<script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script>
		<script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-9969764-2");pageTracker._trackPageview();} catch(err) {}</script>

        <div id="ga1">
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-2552502674694369";
			/* pp-exp-right */
			google_ad_slot = "8244872324";
			google_ad_width = 160;
			google_ad_height = 600;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
        </div>
        <div id="ga2">
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-2552502674694369";
			/* pp-exp-left */
			google_ad_slot = "6448931696";
			google_ad_width = 120;
			google_ad_height = 240;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
        </div>
		<div id="ga5">
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-2552502674694369";
			/* pp-exp-bottommiddle */
			google_ad_slot = "1688625962";
			google_ad_width = 728;
			google_ad_height = 90;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
	4	</div>
		<img src="screenshot.jpg" alt="screenshot" style="display:none;"/>
	</body>
</html>
